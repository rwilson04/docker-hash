<a href='javascript: (function() {
    var domain = document.domain;
    var components = domain.split(".");
    var tld = components.pop();
    var base = components.pop();
    var path = base + "." + tld;
    var lowers = "abcdefghjkmnpqrstuvwxyz";
    var capitals = "ABCDEFGHJKLMNPQRSTUVWXYZ";
    var numbers = "123456789";
    var specials = "*#$!.";
    var letters = lowers + capitals + numbers + specials;
    var outputLength = 10;
    var pathHash;

    function hash(input) {
        var hash = 0,
            i, chr, len;
        if (input.length == 0) return hash;
        for (i = 0, len = input.length; i < len; i++) {
            chr = input.charCodeAt(i);
            hash = ((hash << 5) - hash) + chr;
            hash = hash >>> 0;
        }
        return hash;
    }

    function generate(seed, length, available) {
        seed = seed % 2147483647;
        if (seed <= 0) {
            seed += 2147483646;
        }
        console.log("generating length " + length + "for seed " + seed);
        var output = "";
        var i;
        var index;
        for (i = 0; i < length; i++) {
            seed = seed * 16807 % 2147483647;
            index = seed % available.length;
            output = output + available.substring(index, index + 1);
        }
        return output;
    }

    function next(input, callbacks) {
        console.log("next on " + input);
        var callback = callbacks.shift();
        return callback(input, callbacks);
    }

    function lower(input, callbacks) {
        console.log("lower");
        input = add(input, lowers);
        return next(input, callbacks);
    }

    function capital(input, callbacks) {
        console.log("capital");
        input = add(input, capitals);
        return next(input, callbacks);
    }

    function num(input, callbacks) {
        console.log("num");
        input = add(input, numbers);
        return next(input, callbacks);
    }

    function special(input, callbacks) {
        console.log("special");
        input = add(input, specials);
        return next(input, callbacks);
    }

    function add(input, range) {
        var output = generate(pathHash, 1, range);
        output = input + output;
        return output;
    }

    function write(text) {
        console.log("writing:" + text);
        return text;
    }

    function route(path) {
        console.log("routing: " + path);
        var components = path.split("/");
        var base = components[0];
        var callbacks = [];
        if (components.length === 1) {
            callbacks = [lower, num, special, capital, write];
        }
        pathHash = hash(base);
        var generated = generate(pathHash, outputLength - (callbacks.length - 1), letters);
        return next(generated, callbacks);
    };
    prompt("", route(path));
})()'>Hash</a>
